{"remainingRequest":"C:\\Local Disk\\projects\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Local Disk\\projects\\vue\\src\\store\\modules\\auth.module.js","dependencies":[{"path":"C:\\Local Disk\\projects\\vue\\src\\store\\modules\\auth.module.js","mtime":1619258485021},{"path":"C:\\Local Disk\\projects\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Local Disk\\projects\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovTG9jYWwgRGlzay9wcm9qZWN0cy92dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Mb2NhbCBEaXNrL3Byb2plY3RzL3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGVycm9yIH0gZnJvbSAnQC91dGlscy9lcnJvcic7CnZhciBUT0tFTl9LRVkgPSAnYXV0aC10b2tlbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBmdW5jdGlvbiBzdGF0ZSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUT0tFTl9LRVkpCiAgICB9OwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRPS0VOX0tFWSwgdG9rZW4pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnRva2VuID0gbnVsbDsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oVE9LRU5fS0VZKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIHVybCwgX3lpZWxkJGF4aW9zJHBvc3QsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIHVybCA9ICJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmQ/a2V5PSIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfRkJfS0VZKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBheWxvYWQpLCB7fSwgewogICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfeWllbGQkYXhpb3MkcG9zdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGF4aW9zJHBvc3QuZGF0YTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VG9rZW4nLCBkYXRhLmlkVG9rZW4pOwogICAgICAgICAgICAgICAgY29tbWl0KCdjbGVhck1lc3NhZ2UnLCBudWxsLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3NldE1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiBlcnJvcihfY29udGV4dC50MC5yZXNwb25zZS5kYXRhLmVycm9yLm1lc3NhZ2UpLAogICAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCAxMV1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICB0b2tlbjogZnVuY3Rpb24gdG9rZW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuOwogICAgfSwKICAgIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKF8sIGdldHRlcnMpIHsKICAgICAgcmV0dXJuICEhZ2V0dGVycy50b2tlbjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Local Disk/projects/vue/src/store/modules/auth.module.js"],"names":["axios","error","TOKEN_KEY","namespaced","state","token","localStorage","getItem","mutations","setToken","setItem","logout","removeItem","actions","login","payload","commit","dispatch","url","process","env","VUE_APP_FB_KEY","post","returnSecureToken","data","idToken","root","value","response","message","type","Error","getters","isAuthenticated","_"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,eAApB;AACA,IAAMC,SAAS,GAAG,YAAlB;AAEA,eAAe;AACXC,EAAAA,UAAU,EAAE,IADD;AAEXC,EAAAA,KAFW,mBAEH;AACJ,WAAO;AACHC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqBL,SAArB;AADJ,KAAP;AAGH,GANU;AAOXM,EAAAA,SAAS,EAAE;AACTC,IAAAA,QADS,oBACAL,KADA,EACOC,KADP,EACc;AACnBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACAC,MAAAA,YAAY,CAACI,OAAb,CAAqBR,SAArB,EAAgCG,KAAhC;AACH,KAJQ;AAKPM,IAAAA,MALO,kBAKAP,KALA,EAKO;AACVA,MAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACAC,MAAAA,YAAY,CAACM,UAAb,CAAwBV,SAAxB;AACH;AARM,GAPA;AAkBXW,EAAAA,OAAO,EAAE;AACDC,IAAAA,KADC,uBAC2BC,OAD3B,EACoC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA7BC,gBAAAA,MAA6B,QAA7BA,MAA6B,EAArBC,QAAqB,QAArBA,QAAqB;AAAA;AAE7BC,gBAAAA,GAF6B,uFAEsDC,OAAO,CAACC,GAAR,CAAYC,cAFlE;AAAA;AAAA,uBAGfrB,KAAK,CAACsB,IAAN,CAAWJ,GAAX,kCAAoBH,OAApB;AAA6BQ,kBAAAA,iBAAiB,EAAE;AAAhD,mBAHe;;AAAA;AAAA;AAG7BC,gBAAAA,IAH6B,qBAG7BA,IAH6B;AAInCR,gBAAAA,MAAM,CAAC,UAAD,EAAaQ,IAAI,CAACC,OAAlB,CAAN;AACAT,gBAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,EAAuB;AAACU,kBAAAA,IAAI,EAAE;AAAP,iBAAvB,CAAN;AALmC;AAAA;;AAAA;AAAA;AAAA;AAOnCT,gBAAAA,QAAQ,CAAC,YAAD,EAAe;AACrBU,kBAAAA,KAAK,EAAE1B,KAAK,CAAC,YAAE2B,QAAF,CAAWJ,IAAX,CAAgBvB,KAAhB,CAAsB4B,OAAvB,CADS;AAErBC,kBAAAA,IAAI,EAAE;AAFe,iBAAf,EAGL;AAACJ,kBAAAA,IAAI,EAAE;AAAP,iBAHK,CAAR;AAPmC,sBAW7B,IAAIK,KAAJ,EAX6B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAa1C;AAdM,GAlBE;AAkCXC,EAAAA,OAAO,EAAE;AACL3B,IAAAA,KADK,iBACCD,KADD,EACQ;AACjB,aAAOA,KAAK,CAACC,KAAb;AACK,KAHI;AAIL4B,IAAAA,eAJK,2BAIWC,CAJX,EAIcF,OAJd,EAIuB;AACxB,aAAO,CAAC,CAACA,OAAO,CAAC3B,KAAjB;AACH;AANI;AAlCE,CAAf","sourcesContent":["import axios from 'axios'\r\nimport {error} from '@/utils/error'\r\nconst TOKEN_KEY = 'auth-token'\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state() {\r\n        return {\r\n            token: localStorage.getItem(TOKEN_KEY)\r\n        }\r\n    },\r\n    mutations: {\r\n      setToken(state, token) {\r\n          state.token = token\r\n          localStorage.setItem(TOKEN_KEY, token)\r\n      },\r\n        logout(state) {\r\n            state.token = null\r\n            localStorage.removeItem(TOKEN_KEY)\r\n        },\r\n\r\n    },\r\n    actions: {\r\n      async login({ commit, dispatch }, payload) {\r\n          try {\r\n              const url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.VUE_APP_FB_KEY}`\r\n             const {data} = await axios.post(url, {...payload, returnSecureToken: true})\r\n              commit('setToken', data.idToken)\r\n              commit('clearMessage', null, {root: true})\r\n          } catch (e) {\r\n              dispatch('setMessage', {\r\n                value: error(e.response.data.error.message),\r\n                type: 'danger'\r\n              }, {root: true})\r\n              throw new Error()\r\n          }\r\n      }\r\n    },\r\n    getters: {\r\n        token(state) {\r\n    return state.token\r\n        },\r\n        isAuthenticated(_, getters) {\r\n            return !!getters.token\r\n        }\r\n    }\r\n\r\n}\r\n"]}]}